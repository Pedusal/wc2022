---
title: "webhaku"
author: "pedusal"
date: "2022-11-06"
output: html_document
---

```{python}
#Fetch WC data

import requests
import pandas as pd

user_email = "test-api@invalid-gmail.com"
password = "password"
def login(user_email, password):
    data = {
        "email": user_email,
        "password": password
    }
    response = requests.post("http://api.cup2022.ir/api/v1/user/login", json=data)
    return response.json()["data"]["token"]

token = login(user_email, password)
base_url = "http://api.cup2022.ir/api/v1/"

headers = {
    "Authorization": f"Bearer {token}",
    "Content-Type": "application/json"
}

#standings = requests.get(url=base_url + "standings", headers=headers)
response = requests.get(url=base_url + "match", headers=headers)
assert response.status_code == 200

matches_df = pd.DataFrame.from_dict(response.json()["data"])
#print(matches_df)

```

```{python}
maalintekijat = matches_df['home_scorers'] + matches_df['away_scorers']


maalintekijat_df = pd.DataFrame.from_dict(maalintekijat)

maalintekijat = " ".join(''.join(l) for l in maalintekijat)

print(maalintekijat)

maalintekijat_df = pd.DataFrame.from_dict(maalintekijat)

```




```{python}

matches_df.to_json('Data/ottelut_tulokset.json')

matches_df.to_csv('Data/ottelut_tulokset.txt')
```


